import{l as e,b as s,s as a,e as t}from"./index-c024a321.js";import{u as r,I as i,E as o}from"./vendor-14dfef14.js";function n(){const n=r(),c=i(!1);return{userLogin:async t=>{c.value=!0,await e(t).then((async e=>{if(200==e.code){const t=e.data.token;s(t),await a.dispatch("user/setUser",t),await n.replace("/home"),o({title:"提示",message:"登陆成功！",type:"success",duration:2e3})}else o({title:"提示",message:e.message,type:"error",duration:2e3})})).finally((()=>{c.value=!1}))},userLogout:()=>{a.dispatch("user/clearUser")},userRegister:async e=>{c.value=!0;try{const s=await t(e);200==s.code?o({title:"提示",message:"用户注册成功！",type:"success",duration:2e3}):o({title:"提示",message:s.message,type:"error",duration:2e3})}catch(s){}finally{c.value=!1}},loading:c}}export{n as u};
